(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Wm2z:function(t,e,n){"use strict";n.r(e),n.d(e,"ProjectsModule",(function(){return K}));var c=n("2kYt"),o=n("sEIs"),i=n("EM62"),r=n("NcZ/");let a=(()=>{class t{constructor(t){this.activeModal=t,this.msg=""}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.a))},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-confirmation-modal"]],decls:14,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(i.Ob(0,"div",0),i.Ob(1,"h5",1),i.xc(2,"Modal title"),i.Nb(),i.Ob(3,"button",2),i.Zb("click",(function(){return e.activeModal.close()})),i.Ob(4,"span",3),i.xc(5,"\xd7"),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"div",4),i.Ob(7,"p"),i.xc(8),i.Nb(),i.Nb(),i.Ob(9,"div",5),i.Ob(10,"button",6),i.Zb("click",(function(){return e.activeModal.close(!1)})),i.xc(11,"Close"),i.Nb(),i.Ob(12,"button",7),i.Zb("click",(function(){return e.activeModal.close(!0)})),i.xc(13,"Save changes"),i.Nb(),i.Nb()),2&t&&(i.xb(8),i.yc(e.msg))},styles:[""]}),t})();var l=n("nIj0"),s=n("AytR");function b(t,e){1&t&&i.Kb(0,"i",20)}function d(t,e){if(1&t&&i.Kb(0,"img",21),2&t){const t=i.bc(2);i.gc("src",t.form.value.url,i.qc)("alt",t.form.value.name)}}function m(t,e){if(1&t){const t=i.Pb();i.Ob(0,"div"),i.Ob(1,"div",9),i.Ob(2,"div",10),i.Ob(3,"button",8),i.Zb("click",(function(){return i.pc(t),i.oc(7).click()})),i.Kb(4,"i",11),i.xc(5," Upload Panorama"),i.Nb(),i.Ob(6,"input",12,13),i.Zb("change",(function(e){return i.pc(t),i.bc().uploadImage(e)})),i.Nb(),i.vc(8,b,1,0,"i",14),i.Nb(),i.Nb(),i.Ob(9,"div",15),i.Ob(10,"div",16),i.Ob(11,"ul",17),i.Ob(12,"li",18),i.vc(13,d,1,2,"img",19),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()}if(2&t){const t=i.bc();i.xb(8),i.gc("ngIf",t.loading),i.xb(5),i.gc("ngIf",t.form.value.url)}}function u(t,e){if(1&t){const t=i.Pb();i.Ob(0,"div"),i.Ob(1,"div",9),i.Ob(2,"div",22),i.Kb(3,"img",21),i.Nb(),i.Ob(4,"div",23),i.Ob(5,"button",8),i.Zb("click",(function(){return i.pc(t),i.oc(9).click()})),i.Kb(6,"i",24),i.xc(7," Replace"),i.Nb(),i.Ob(8,"input",25,13),i.Zb("change",(function(e){return i.pc(t),i.bc().uploadFile(e)})),i.Nb(),i.Nb(),i.Ob(10,"div",26),i.Ob(11,"h5",27),i.xc(12,"Edit Panorama Coordinates"),i.Nb(),i.Nb(),i.Ob(13,"div",10),i.Ob(14,"form",28),i.Ob(15,"div",29),i.Ob(16,"div",30),i.Ob(17,"span",31),i.xc(18,"x"),i.Nb(),i.Kb(19,"input",32),i.Nb(),i.Nb(),i.Ob(20,"div",29),i.Ob(21,"div",30),i.Ob(22,"span",33),i.xc(23,"y"),i.Nb(),i.Kb(24,"input",34),i.Nb(),i.Nb(),i.Ob(25,"div",29),i.Ob(26,"div",30),i.Ob(27,"span",33),i.xc(28,"y"),i.Nb(),i.Kb(29,"input",35),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Nb()}if(2&t){const t=i.bc();i.xb(3),i.gc("src",t.mediaPath,i.qc)("alt",t.panorama.name),i.xb(11),i.gc("formGroup",t.form)}}let p=(()=>{class t{constructor(t){this.activeModal=t,this.title="+ Add Panoramas",this.isEdit=!1,this.loading=!1}ngOnInit(){this.isEdit&&(this.mediaPath=s.a.apiHost+this.panoData.path+this.panorama.name),this.createForm()}createForm(){var t,e,n;this.form=new l.d({name:new l.b(""),x:new l.b(null===(t=this.panorama)||void 0===t?void 0:t.panoramas.x),y:new l.b(null===(e=this.panorama)||void 0===e?void 0:e.panoramas.y),z:new l.b(null===(n=this.panorama)||void 0===n?void 0:n.panoramas.z),url:new l.b("")})}uploadImage(t){return e=this,void 0,c=function*(){if(t.target.files.length){this.loading=!0;const e=t.target.files[0],n=e.name.split(".").slice(0,-1).join(".").split("_"),[c,o,i,r]=n,a=yield function(t){return new Promise(((e,n)=>{const c=new FileReader;c.onload=t=>e(t.target.result),c.onerror=n,c.readAsDataURL(t)}))}(e);this.form.patchValue({name:e.name,x:o,y:i,z:r,url:a}),this.loading=!1}},new((n=void 0)||(n=Promise))((function(t,o){function i(t){try{a(c.next(t))}catch(e){o(e)}}function r(t){try{a(c.throw(t))}catch(e){o(e)}}function a(e){var c;e.done?t(e.value):(c=e.value,c instanceof n?c:new n((function(t){t(c)}))).then(i,r)}a((c=c.apply(e,[])).next())}));var e,n,c}submit(){this.activeModal.close({name:this.form.value.name,panoramas:{panorama:this.form.value.url,neighbors:[],x:this.form.value.x,y:this.form.value.y,z:this.form.value.z}})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.a))},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-panorama-form"]],decls:14,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col","text-center"],[1,"fa","fa-upload"],["hidden","","type","file",3,"change"],["fileInput",""],["class","fa fa-spin fa-spinner d-xl-flex justify-content-xl-center",4,"ngIf"],[1,"row","mt-4"],[1,"col"],[1,"list-group"],[1,"list-group-item","d-sm-flex","d-xl-flex","justify-content-sm-center","justify-content-xl-center"],["class","img-fluid",3,"src","alt",4,"ngIf"],[1,"fa","fa-spin","fa-spinner","d-xl-flex","justify-content-xl-center"],[1,"img-fluid",3,"src","alt"],[1,"col-12","text-center"],[1,"col-12","text-center","my-4"],[1,"fa","fa-exchange"],["type","file","accept","images/*","hidden","",3,"change"],[1,"col-12"],[1,"text-center"],[1,"row","g-3",3,"formGroup"],[1,"col-4"],[1,"input-group","mb-3"],["id","coord_x",1,"input-group-text"],["type","number","formControlName","x","placeholder","x",1,"form-control"],["id","coord_y",1,"input-group-text"],["type","number","formControlName","y","placeholder","y",1,"form-control"],["type","number","formControlName","z","placeholder","y",1,"form-control"]],template:function(t,e){1&t&&(i.Ob(0,"div",0),i.Ob(1,"h5",1),i.xc(2),i.Nb(),i.Ob(3,"button",2),i.Zb("click",(function(){return e.activeModal.close()})),i.Ob(4,"span",3),i.xc(5,"\xd7"),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"div",4),i.vc(7,m,14,2,"div",5),i.vc(8,u,30,3,"div",5),i.Nb(),i.Ob(9,"div",6),i.Ob(10,"button",7),i.Zb("click",(function(){return e.activeModal.close(!1)})),i.xc(11,"Close"),i.Nb(),i.Ob(12,"button",8),i.Zb("click",(function(){return e.submit()})),i.xc(13,"Save changes"),i.Nb(),i.Nb()),2&t&&(i.xb(2),i.yc(e.title),i.xb(5),i.gc("ngIf",!e.isEdit),i.xb(1),i.gc("ngIf",e.isEdit))},directives:[c.k,l.p,l.j,l.e,l.l,l.a,l.i,l.c],styles:[""]}),t})();var f=n("vobO");const g=s.a.apiHost;let x=(()=>{class t{constructor(t){this.http=t}createProject(t){return this.http.post(g+"create-panoramas-project",Object.assign({client_id:1295},t))}getProjects(){return this.http.post(g+"get-panoramas-projects",{client_id:1295})}getProject(t){return this.http.post(g+"get-panoramas-project",{client_id:1295,project_id:t})}getPanoramas(t){const e=new f.c({fromObject:{project_id:t}});return this.http.get(g+"get-panoramas",{params:e})}createPanorama(t,e){return this.http.post(g+"create-panorama",{project_id:t,panorama_data:e})}}return t.\u0275fac=function(e){return new(e||t)(i.Wb(f.a))},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function h(t,e){if(1&t){const t=i.Pb();i.Ob(0,"div",14),i.Ob(1,"div",15),i.Ob(2,"div",16),i.Kb(3,"input",17),i.Ob(4,"label",18),i.xc(5),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"div",19),i.Kb(7,"strong"),i.Nb(),i.Ob(8,"div",20),i.Ob(9,"a",21),i.Zb("click",(function(){i.pc(t);const n=e.$implicit,c=i.bc().ngIf;return i.bc(2).openEditPanorama(n,c)})),i.Kb(10,"i",22),i.Nb(),i.Nb(),i.Nb()}if(2&t){const t=e.$implicit;i.xb(5),i.yc(t.name)}}function v(t,e){if(1&t&&(i.Mb(0),i.vc(1,h,11,1,"div",13),i.Lb()),2&t){const t=e.ngIf;i.xb(1),i.gc("ngForOf",t.data)}}const y=function(t){return["/model",t]};function O(t,e){if(1&t){const t=i.Pb();i.Mb(0),i.Ob(1,"h1",1),i.xc(2),i.Nb(),i.Ob(3,"div",2),i.Ob(4,"div",3),i.Ob(5,"div",4),i.Ob(6,"div",5),i.Ob(7,"button",6),i.Zb("click",(function(){i.pc(t);const n=e.ngIf;return i.bc().openCreateForm(n)})),i.Kb(8,"i",7),i.Ob(9,"span"),i.xc(10,"Add Panoramas"),i.Nb(),i.Nb(),i.Ob(11,"button",8),i.Zb("click",(function(){return i.pc(t),i.bc().deletePanoramas()})),i.xc(12,"Delete"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(13,"div",9),i.Ob(14,"h4",10),i.xc(15,"Walkthrough URL"),i.Nb(),i.Ob(16,"p",11),i.Ob(17,"a",12),i.xc(18),i.Nb(),i.Nb(),i.vc(19,v,2,1,"ng-container",0),i.cc(20,"async"),i.Nb(),i.Nb(),i.Lb()}if(2&t){const t=e.ngIf,n=i.bc();i.xb(2),i.yc(t.name),i.xb(15),i.gc("routerLink",i.kc(6,y,t.id)),i.xb(1),i.zc("www.slideshowcloud.com/",t.id,""),i.xb(1),i.gc("ngIf",i.dc(20,4,n.panoramas$))}}let N=(()=>{class t{constructor(t,e,n){this.modalService=t,this.route=e,this.projectsService=n}ngOnInit(){this.initData()}initData(){const t=this.route.snapshot.params.id;this.panoramas$=this.projectsService.getPanoramas(t),this.project$=this.projectsService.getProject(t)}openCreateForm(t){const e=this.modalService.open(p,{size:"lg"});e.componentInstance.title="Create Panorama",e.result.then((e=>{e&&this.projectsService.createPanorama(t.id,e).subscribe((t=>{this.initData()}))}))}openEditPanorama(t,e){const n=this.modalService.open(p,{size:"lg"});n.componentInstance.title="Edit Panorama",n.componentInstance.panorama=t,n.componentInstance.panoData=e,n.componentInstance.isEdit=!0,n.result.then((t=>{}))}deletePanoramas(){const t=this.modalService.open(a);t.componentInstance.msg="Are you sure you want to delete these projects?",t.result.then((t=>{}))}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.b),i.Jb(o.a),i.Jb(x))},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-project-details"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"text-center","my-5"],[1,"card","shadow","mb-4"],[1,"card-header","text-right","d-md-flex","justify-content-md-center","align-items-md-center","py-3"],[1,"row"],[1,"col","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","align-items-md-center","align-items-lg-center","justify-content-xl-end","align-items-xl-center"],["type","button",1,"btn","btn-primary","mx-3",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-danger",3,"click"],[1,"card-body"],[1,"text-center"],[1,"text-center","text-primary","h5"],[1,"text-underline",3,"routerLink"],["class","row border-bottom py-3",4,"ngFor","ngForOf"],[1,"row","border-bottom","py-3"],[1,"col-auto","col-sm-auto","col-md-auto","col-lg-auto","col-xl-auto","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","justify-content-md-center","align-items-md-center","justify-content-lg-center","align-items-lg-center","justify-content-xl-center","align-items-xl-center"],[1,"form-check"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input"],["for","flexCheckChecked",1,"form-check-label"],[1,"col","d-sm-flex","align-items-sm-center"],[1,"col-auto","col-sm-auto","col-md-auto","col-lg-auto","col-xl-auto","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","align-items-md-center","justify-content-lg-center","align-items-lg-center","align-items-xl-center"],["href","javascript: void 0",3,"click"],[1,"fa","fa-edit","fa-3x"]],template:function(t,e){1&t&&(i.vc(0,O,21,8,"ng-container",0),i.cc(1,"async")),2&t&&i.gc("ngIf",i.dc(1,1,e.project$))},directives:[c.k,o.c,c.j],pipes:[c.b],styles:[""]}),t})(),j=(()=>{class t{constructor(t){this.activeModal=t,this.images=[]}ngOnInit(){this.createForm()}createForm(){this.form=new l.d({name:new l.b("",l.n.required),address:new l.b("",l.n.required)})}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.a))},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-project-form"]],decls:21,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","g-3",3,"formGroup"],[1,"col-12"],["for","staticEmail2",1,"visually-hidden"],["type","text","formControlName","name","id","staticEmail2","placeholder","Name",1,"form-control"],["for","inputPassword2",1,"visually-hidden"],["type","text","formControlName","address","id","inputPassword2","placeholder","Address",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,e){1&t&&(i.Ob(0,"div",0),i.Ob(1,"h4",1),i.xc(2,"Create New Project"),i.Nb(),i.Ob(3,"button",2),i.Zb("click",(function(){return e.activeModal.dismiss("Cross")})),i.Ob(4,"span",3),i.xc(5,"\xd7"),i.Nb(),i.Nb(),i.Nb(),i.Ob(6,"div",4),i.Ob(7,"form",5),i.Ob(8,"div",6),i.Ob(9,"label",7),i.xc(10,"Name"),i.Nb(),i.Kb(11,"input",8),i.Nb(),i.Ob(12,"div",6),i.Ob(13,"label",9),i.xc(14,"Address"),i.Nb(),i.Kb(15,"input",10),i.Nb(),i.Nb(),i.Nb(),i.Ob(16,"div",11),i.Ob(17,"button",12),i.Zb("click",(function(){return e.activeModal.close(!1)})),i.xc(18,"Close"),i.Nb(),i.Ob(19,"button",13),i.Zb("click",(function(){return e.activeModal.close(e.form.value)})),i.xc(20,"Create"),i.Nb(),i.Nb()),2&t&&(i.xb(7),i.gc("formGroup",e.form),i.xb(12),i.gc("disabled",e.form.invalid))},directives:[l.p,l.j,l.e,l.a,l.i,l.c],styles:[""]}),t})();const k=function(t){return[t]};function w(t,e){if(1&t&&(i.Ob(0,"div",11),i.Ob(1,"div",12),i.Ob(2,"div",13),i.Kb(3,"input",14),i.Kb(4,"label",15),i.Nb(),i.Nb(),i.Ob(5,"div",16),i.Ob(6,"strong"),i.xc(7),i.Nb(),i.Nb(),i.Ob(8,"div",17),i.Ob(9,"span"),i.xc(10),i.Nb(),i.Nb(),i.Ob(11,"div",18),i.Ob(12,"a",19),i.Kb(13,"i",20),i.Nb(),i.Nb(),i.Nb()),2&t){const t=e.$implicit;i.xb(7),i.yc(t.name),i.xb(3),i.yc(t.date),i.xb(2),i.gc("routerLink",i.kc(3,k,t.id))}}let P=(()=>{class t{constructor(t,e){this.modalService=t,this.projectsService=e}ngOnInit(){this.init()}init(){this.projects$=this.projectsService.getProjects()}openCreateForm(){this.modalService.open(j,{size:"lg"}).result.then((t=>{t&&this.projectsService.createProject(t).subscribe((t=>{console.log(t),this.init()}))}))}deleteProjects(){const t=this.modalService.open(a);t.componentInstance.msg="Are you sure you want to delete these projects?",t.result.then((t=>{}))}}return t.\u0275fac=function(e){return new(e||t)(i.Jb(r.b),i.Jb(x))},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-project-list"]],decls:16,vars:3,consts:[[1,"text-center","my-5"],[1,"card","shadow","mb-4"],[1,"card-header","text-right","d-md-flex","justify-content-md-center","align-items-md-center","py-3"],[1,"row"],[1,"col","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","align-items-md-center","align-items-lg-center","justify-content-xl-end","align-items-xl-center"],["type","button",1,"btn","btn-primary","mx-3",3,"click"],[1,"fa","fa-plus"],["type","button",1,"btn","btn-danger",3,"click"],[1,"card-body"],[1,"text-center"],["class","row border-bottom py-3",4,"ngFor","ngForOf"],[1,"row","border-bottom","py-3"],[1,"col-auto","col-sm-auto","col-md-auto","col-lg-auto","col-xl-auto","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","justify-content-md-center","align-items-md-center","justify-content-lg-center","align-items-lg-center","justify-content-xl-center","align-items-xl-center"],[1,"form-check"],["type","checkbox","value","","id","flexCheckChecked",1,"form-check-input"],["for","flexCheckChecked",1,"form-check-label"],[1,"col","d-sm-flex","align-items-sm-center"],[1,"col-auto","col-sm-auto","col-md-auto","col-lg-auto","col-xl-auto","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","justify-content-md-center","align-items-md-center","justify-content-lg-center","align-items-lg-center","align-items-xl-center"],[1,"col-auto","col-sm-auto","col-md-auto","col-lg-auto","col-xl-auto","d-sm-flex","d-md-flex","d-lg-flex","d-xl-flex","align-items-sm-center","align-items-md-center","justify-content-lg-center","align-items-lg-center","align-items-xl-center"],[3,"routerLink"],[1,"fa","fa-chevron-right"]],template:function(t,e){1&t&&(i.Ob(0,"h1",0),i.xc(1,"Create panoramic walkthough"),i.Nb(),i.Ob(2,"div",1),i.Ob(3,"div",2),i.Ob(4,"div",3),i.Ob(5,"div",4),i.Ob(6,"button",5),i.Zb("click",(function(){return e.openCreateForm()})),i.Kb(7,"i",6),i.xc(8,"Create New Project"),i.Nb(),i.Ob(9,"button",7),i.Zb("click",(function(){return e.deleteProjects()})),i.xc(10,"Delete"),i.Nb(),i.Nb(),i.Nb(),i.Nb(),i.Ob(11,"div",8),i.Ob(12,"h4",9),i.xc(13,"Project Panoramas"),i.Nb(),i.vc(14,w,14,5,"div",10),i.cc(15,"async"),i.Nb(),i.Nb()),2&t&&(i.xb(14),i.gc("ngForOf",i.dc(15,1,e.projects$)))},directives:[c.j,o.c],pipes:[c.b],styles:[""]}),t})();const I=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Db({type:t,selectors:[["propertyspaces-projects"]],decls:4,vars:0,consts:[[1,"container","d-flex","flex-column","align-items-center","justify-content-center"],[1,"row","col-12"],[1,"col"]],template:function(t,e){1&t&&(i.Ob(0,"main",0),i.Ob(1,"div",1),i.Ob(2,"div",2),i.Kb(3,"router-outlet"),i.Nb(),i.Nb(),i.Nb())},directives:[o.e],styles:[".container[_ngcontent-%COMP%]{margin-top:56px;min-height:calc(100vh - 56px)}"]}),t})(),children:[{path:"",component:P},{path:":id",component:N}]}];let C=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},imports:[[o.d.forChild(I)],o.d]}),t})(),K=(()=>{class t{}return t.\u0275mod=i.Hb({type:t}),t.\u0275inj=i.Gb({factory:function(e){return new(e||t)},imports:[[c.c,C,r.c,l.f,l.m]]}),t})()}}]);